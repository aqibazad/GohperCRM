<head>

    <!-- Include Bootstrap CSS and other necessary libraries -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.21/css/jquery.dataTables.min.css">
    <script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>

    <style>
        .country-code {
            width: 120px; /* Adjust width as needed */
        }

        .phone-number {
            flex: 1; /* Takes up the remaining space */
        }

        .icon-container {
            position: relative;
            display: inline-block;
            cursor: pointer;
        }

        .tooltip-text {
            visibility: hidden;
            width: 60px;
            background-color: #555;
            color: #fff;
            text-align: center;
            border-radius: 5px;
            padding: 5px 0;
            position: absolute;
            z-index: 1;
            bottom: 125%; /* Position the tooltip above the icon */
            left: 50%;
            margin-left: -30px; /* Center the tooltip */
            opacity: 0;
            transition: opacity 0.3s;
            white-space: nowrap; /* Prevent text wrapping */
        }

        .icon-container:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

    </style>
</head>

<div class="content-wrapper">
    <div class="content-wrapper-before"></div>
    <div class="container-full">


        <!-- Main content -->
        <section class="content">
            <!-- Content Header (Page header) -->
            <div class="content-header">
                <div class="d-flex align-items-center">
                    <div class="w-p100 d-md-flex align-items-center justify-content-between">
                        <h3 class="page-title">   </h3>
                        <div class="d-inline-block align-items-center">
                            <nav>
                                <ol class="breadcrumb">
                                </ol>
                            </nav>
                        </div>
                    </div>

                </div>
            </div>
            <div class="row">

                <div class="col-12">
                    <div class="box">
                        <div class="box-header with-border">
                            <h3 class="box-title">Lead History</h3>
                            <div class="float-right">
                               

                            </div>
                        </div>



                        <!-- /.box-header -->
                        <div class="box-body">
                            <div class="table-responsive">
                                <button id="exportToExcel" class="btn btn-primary mb-3">Export to Excel</button>

                                <table id="leadHistoryTable" class="table table-bordered table-hover display nowrap margin-top-10 w-p100">
                                    <thead>
                                        <tr>
                                            <th>Name</th>
                                            <th>Email</th>
                                            <th>PhoneNumber</th>
                                            <th>Status</th>
                                            <th>Follow-up Date</th>
                                            <th>User Name</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (var item in Model)
                                        {
                                            <tr>
                                                <td>@item.FullName</td>
                                                <td>@item.Email</td>
                                                <td>@item.PhoneNumber</td>
                                                <td>@item.Status</td>
                                                <td>@item.LeadFollowupDate?.ToString("MM/dd/yyyy")</td>
                                                <td>@item.UserName</td>
                                            </tr>
                                        }
                                    </tbody>
                                </table>

                                
                            </div>
                        </div>
                        <!-- /.box-body -->
                    </div>
                </div>
            </div>

        </section>

    </div>
</div>
@section Scripts {
    <script>
        $(document).ready(function () {
            $('#leadHistoryTable').DataTable();
            $('#exportToExcel').on('click', function () {
                console.log("hiiiiiii");
                var wb = XLSX.utils.book_new();
                var ws = XLSX.utils.table_to_sheet($('#leadHistoryTable')[0]);
                XLSX.utils.book_append_sheet(wb, ws, 'Lead Data');
                XLSX.writeFile(wb, 'leadHistoryTable.xlsx');
            });
        });
    </script>
}
